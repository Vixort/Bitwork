generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Job {
  id           Int      @id @default(autoincrement())
  title        String
  company      String
  companyLogo  String?
  coverImage   String?
  location     String
  type         String
  level        String
  salaryMin    Int
  salaryMax    Int
  description  String
  skills       String[]
  benefits     String[]
  postedDate   DateTime @default(now())
  applicants   Int      @default(0)
  isVerified   Boolean  @default(false)
  isUrgent     Boolean  @default(false)
  isRemote     Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Product {
  id              Int      @id @default(autoincrement())
  title           String
  description     String
  fullDescription String?
  price           Float
  category        String
  brand           String
  warranty        String?
  weight          String?
  stock           Int      @default(0)
  sku             String   @unique
  images          String[]
  specs           Json?
  rating          Float    @default(0)
  sold            Int      @default(0)
  seller          String
  status          String   @default("active") // active, out_of_stock, draft
  reviews         Review[]
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Review {
  id        Int      @id @default(autoincrement())
  productId Int
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user      String
  avatar    String?
  rating    Int
  comment   String?
  date      DateTime @default(now())
  images    String[]
  helpful   Int      @default(0)
}

model User {
  id        String   @id // Maps to Supabase Auth UID
  email     String   @unique
  fullName  String?
  avatarUrl String?
  role      String   @default("user") // 'user', 'admin', 'seller'
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
